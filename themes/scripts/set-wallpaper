#!/usr/bin/env nu

while (swww query | complete | get exit_code) != 0 {
    sleep 0.2sec
}

match (sys host).hostname {
    brage-work-laptop => {
        # all wallpapers
        let path = nu $"($env.CONFIG_PATH)/hypr/scripts/get-wallpaper" h

        do -i {
            swww img --outputs "eDP-1,DP-6" --transition-duration=1 ($path | path expand)
        }

        do -i {
            swww img --outputs "DP-8" --transition-duration=1 ($path | path expand)
        }

        let path = nu $"($env.CONFIG_PATH)/hypr/scripts/get-wallpaper" w

        do -i {
            swww img --outputs "DP-7" --transition-duration=1 ($path | path expand)
        }

        do -i {
            swww img --outputs "DP-9" --transition-duration=1 ($path | path expand)
        }

        return
    }
    pod => {
        # all wallpapers
        let path = nu $"($env.CONFIG_PATH)/hypr/scripts/get-wallpaper" h
        swww img --outputs "eDP-1" --transition-duration=1 ($path | path expand)
        return
    }
    skypex => {
        # horizontal wallpaper
        let path = nu $"($env.CONFIG_PATH)/hypr/scripts/get-wallpaper" h
        swww img --outputs "DP-1" --transition-duration=1 ($path | path expand)

        # vertical wallpaper
        let path = nu $"($env.CONFIG_PATH)/hypr/scripts/get-wallpaper" v
        swww img --outputs "DP-2" --transition-duration=1 ($path | path expand)
    }
}

